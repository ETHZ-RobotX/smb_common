<?xml version="1.0" encoding="UTF-8"?>
<launch>

  <!-- Arguments -->
  <arg name="cloud_topic"           default="/rslidar/points"  doc="input topic for the lidar pointcloud"/>
  <arg name="parameter_filename"    default="param_rs16_localization.lua" doc="param file name"/>
  <arg name="parameter_folder_path" default="$(find smb_slam)/config/open3d_slam/" doc="directory for the parameter files"/>
  <arg name="launch_rviz"           default="false" doc="whether to launch rviz"/>
  <arg name="launch_sensors"        default="false" doc="whether to launch the sensors on the robot"/>
  <arg name="pcd_file_path"         default="$(find smb_slam)/data/maps/map.pcd" doc="absolute path for loading the map used for localization"/>
  <arg name="map_saving_folder"     default="$(find smb_slam)/data/maps/" doc="Path for saving the map (Won't get updated in this case)"/>

  <!-- Potentially launch sensors -->
  <include file="$(find smb)/launch/sensors.launch" if="$(arg launch_sensors)"> </include> 

  <!-- Launch Map Builder (open3d_slam) -->
  <include file="$(find open3d_slam_ros)/launch/development.launch" if="$(arg launch_open3d_slam)">
      <arg name="odometry_topic" default="/graph_msf/est_odometry_odom_imu"/>
      <arg name="assumed_external_odometry_tracked_frame" default="imu"/>
      <arg name="parameter_folder_path" default="$(find open3d_slam_ros)/param/"/>
      <arg name="parameter_filename" default="$(arg parameter_filename)"/>
      <arg name="map_saving_folder" default="$(arg map_saving_folder)"/>
      <arg name="use_sim_time" value="$(arg use_sim_time)" />
      <arg name="cloud_topic" default="$(arg cloud_topic)"/>
      <arg name="launch_rviz" default="$(arg launch_rviz)"/>
  </include>

  
</launch>